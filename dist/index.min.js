"use strict";function feedPromise(r,n,t){return"function"!=typeof t&&(t=n,n={}),new Promise(function(e,i){t(r,n).then(function(r){return e(r)}).catch(function(r){return i(r)})})}var setupPromise=function(r,n){if(r instanceof Array){if(n instanceof Array)return{params:Array().concat([],r),triggers:n};if(n instanceof Function)return{params:Array().concat([],r),triggers:[n]};throw new Error("Invalid consumers list")}throw new Error("params passed must be an array")};Promise.knit=Promise.knit||function(r,n,t,e){return new Promise(function(i,a){var o=setupPromise(r,n),c=t?t:{},s=function r(n,t,s){var u=n.shift(),f=t[0];return void 0==u?(t.shift(),0==t.length?i(s):e?(n=c,r(n,t,[])):(n=Array().concat([],o.params),r(n,t,s))):feedPromise(u,s,f).then(function(e){return c=e,r(n,t,s)}).catch(function(r){return a(r)})};return s(Array().concat([],o.params),Array().concat([],o.triggers),c)})};